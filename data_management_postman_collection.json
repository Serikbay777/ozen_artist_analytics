{
  "info": {
    "name": "Music Analyzer - Data Management API",
    "description": "API endpoints for uploading and managing CSV data files",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Upload CSV File",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "src": [],
              "description": "CSV file to upload"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/data/upload-csv",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "data",
            "upload-csv"
          ]
        },
        "description": "Upload a single CSV file to data/processed directory. The file will be automatically renamed with a timestamp to avoid conflicts."
      },
      "response": [
        {
          "name": "Success Example",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/data/upload-csv",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "data",
                "upload-csv"
              ]
            }
          },
          "status": "Created",
          "code": 201,
          "_postman_previewlanguage": "json",
          "header": [],
          "body": "{\n  \"success\": true,\n  \"message\": \"File uploaded successfully\",\n  \"filename\": \"ozen_20260129_143522.csv\",\n  \"original_filename\": \"ozen.csv\",\n  \"path\": \"/path/to/data/processed/ozen_20260129_143522.csv\",\n  \"rows\": 6225,\n  \"columns\": [\"Reporting Period\", \"Reporting Date\", \"Sale Month\", \"Country of Sale\", \"Store\", \"Artist\", \"Title\", \"Label\", \"Quantity\", \"Partner Share\", \"Currency\", \"Sale Type\"],\n  \"size_bytes\": 1048576,\n  \"size_mb\": 1.0\n}"
        }
      ]
    },
    {
      "name": "Upload Multiple CSV Files",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "files",
              "type": "file",
              "src": [],
              "description": "First CSV file"
            },
            {
              "key": "files",
              "type": "file",
              "src": [],
              "description": "Second CSV file"
            },
            {
              "key": "files",
              "type": "file",
              "src": [],
              "description": "Third CSV file (add more as needed)"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/data/upload-csv-batch",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "data",
            "upload-csv-batch"
          ]
        },
        "description": "Upload multiple CSV files at once. Returns information about successfully uploaded files and any failures."
      },
      "response": [
        {
          "name": "Success Example",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/data/upload-csv-batch",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "data",
                "upload-csv-batch"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "body": "{\n  \"success\": true,\n  \"total\": 3,\n  \"uploaded_count\": 3,\n  \"failed_count\": 0,\n  \"uploaded\": [\n    {\n      \"filename\": \"file1_20260129_143522.csv\",\n      \"original_filename\": \"file1.csv\",\n      \"path\": \"/path/to/data/processed/file1_20260129_143522.csv\",\n      \"rows\": 1000,\n      \"columns\": [\"col1\", \"col2\", \"col3\"],\n      \"size_bytes\": 50000,\n      \"size_mb\": 0.05\n    }\n  ],\n  \"failed\": []\n}"
        }
      ]
    },
    {
      "name": "List All Files",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/data/list-files",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "data",
            "list-files"
          ]
        },
        "description": "Get a list of all CSV files in the data/processed directory with their metadata (size, modified date, row count, etc.)"
      },
      "response": [
        {
          "name": "Success Example",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/list-files",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "data",
                "list-files"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "body": "{\n  \"success\": true,\n  \"files\": [\n    {\n      \"filename\": \"ozen_20260129_143522.csv\",\n      \"path\": \"/path/to/data/processed/ozen_20260129_143522.csv\",\n      \"size_bytes\": 1048576,\n      \"size_mb\": 1.0,\n      \"modified_at\": \"2026-01-29T14:35:22\",\n      \"rows\": 6225,\n      \"columns\": 12\n    }\n  ],\n  \"total_count\": 1,\n  \"total_size_mb\": 1.0\n}"
        }
      ]
    },
    {
      "name": "Get File Info",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/data/file-info/:filename",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "data",
            "file-info",
            ":filename"
          ],
          "variable": [
            {
              "key": "filename",
              "value": "ozen_20260129_143522.csv",
              "description": "Name of the file to get info about"
            }
          ]
        },
        "description": "Get detailed information about a specific CSV file including column names, data types, preview of first 5 rows, and statistics for numeric columns."
      },
      "response": [
        {
          "name": "Success Example",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/file-info/ozen_20260129_143522.csv",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "data",
                "file-info",
                "ozen_20260129_143522.csv"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "body": "{\n  \"success\": true,\n  \"filename\": \"ozen_20260129_143522.csv\",\n  \"path\": \"/path/to/data/processed/ozen_20260129_143522.csv\",\n  \"size_bytes\": 1048576,\n  \"size_mb\": 1.0,\n  \"modified_at\": \"2026-01-29T14:35:22\",\n  \"rows\": 6225,\n  \"columns\": [\"Reporting Period\", \"Reporting Date\", \"Sale Month\", \"Country of Sale\", \"Store\", \"Artist\", \"Title\", \"Label\", \"Quantity\", \"Partner Share\", \"Currency\", \"Sale Type\"],\n  \"column_count\": 12,\n  \"data_types\": {\n    \"Quantity\": \"int64\",\n    \"Partner Share\": \"float64\"\n  },\n  \"preview\": [\n    {\n      \"Reporting Period\": \"2019 Q2\",\n      \"Artist\": \"Ãµzen\",\n      \"Quantity\": 1000,\n      \"Partner Share\": 5.5\n    }\n  ],\n  \"statistics\": {\n    \"Quantity\": {\n      \"min\": 1,\n      \"max\": 50000,\n      \"mean\": 1234.5,\n      \"median\": 500\n    }\n  }\n}"
        }
      ]
    },
    {
      "name": "Delete File",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/data/delete-file/:filename",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "data",
            "delete-file",
            ":filename"
          ],
          "variable": [
            {
              "key": "filename",
              "value": "old_file_20260101_120000.csv",
              "description": "Name of the file to delete"
            }
          ]
        },
        "description": "Delete a CSV file from the data/processed directory. The filename is validated to prevent path traversal attacks."
      },
      "response": [
        {
          "name": "Success Example",
          "originalRequest": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/delete-file/old_file_20260101_120000.csv",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "data",
                "delete-file",
                "old_file_20260101_120000.csv"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "body": "{\n  \"success\": true,\n  \"message\": \"File 'old_file_20260101_120000.csv' deleted successfully\"\n}"
        },
        {
          "name": "File Not Found",
          "originalRequest": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data/delete-file/nonexistent.csv",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "data",
                "delete-file",
                "nonexistent.csv"
              ]
            }
          },
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "header": [],
          "body": "{\n  \"detail\": \"File 'nonexistent.csv' not found\"\n}"
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    }
  ]
}

